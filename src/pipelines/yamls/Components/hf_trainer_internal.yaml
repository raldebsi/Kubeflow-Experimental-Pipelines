name: HuggingFace Trainer
description: Launches a single task to train a HuggingFace model.
inputs:
- {name: Extra Params, type: String, description: 'The extra parameters for the training job.'}
- {name: Model, type: String, description: "The path to a model or the name from HF"}
- {name: Train File, type: String, description: 'The path to the training file.'}
- {name: Max Seq Len, type: Integer, description: 'The maximum sequence length.'}
- {name: Batch Size, type: Integer, description: 'The batch size.'}
- {name: Epochs, type: Integer, description: 'The number of epochs.'}
- {name: Learning Rate, type: Float, description: 'The learning rate.'}
- {name: Save Steps, type: Integer, description: 'The number of steps between saving checkpoints.'}
- {name: Save Path, type: String, description: 'The path to save the model.'}
implementation:
  container:
    image: abdullahsaal/hf_train@sha256:fb30378e91fba55f29e4cba84f74a90e12b6a02f1da1e39d4fc339c3bd79276c
    command: 
      - python3
      - /workspace/train.py
      - {inputValue: Extra Params}
    args: [
      --model_name_or_path, {inputValue: Model},
      --train_file, {inputValue: Train File},
      --max_seq_length, {inputValue: Max Seq Len},
      --per_device_train_batch_size, {inputValue: Batch Size},
      --num_train_epochs, {inputValue: Epochs},
      --learning_rate, {inputValue: Learning Rate},
      --save_steps, {inputValue: Save Steps},
      --output_dir, {inputValue: Save Path}
    ]
    # - {inputValue: Params}
